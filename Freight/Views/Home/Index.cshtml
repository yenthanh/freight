@{
    ViewBag.Title = "Home Page";
}
<link href="~/Style/login.css" rel="stylesheet" />
<div class="wrapper fadeInDown">
    <div id="formContent">
        <div class="fadeIn first" style="margin-top:30px">
            <img src="https://ebiz5-staging.mentormedia.com/RFID-WIREFRAME/_nuxt/img/logo.9b9a022.png" id="icon" alt="User Icon" />
            <h3 style="margin-top: 10px;">
                MENTOR MEDIA FREIGHT PORTAL
            </h3>
        </div>
        <hr role="separator" aria-orientation="horizontal" class="my-8 v-divider theme--light">
        <form action="/Home/Index" method="post" enctype="multipart/form-data">
            @*<div class="form-group row">
                <label class="col-md-3"><img src="https://img.icons8.com/ios-glyphs/30/000000/user--v1.png" /></label>
                <input type="email" class="col-md-9" style="margin-left: -30px;" id="exampleInputEmail1" aria-describedby="emailHelp" placeholder="Email" name="email" style="max-width:380px">
            </div>*@
            @*<div class="form-group row">
                <label class="col-md-12" style="font-weight:bold;color:red">For Mentor Media Employee, Please click "LOGIN" button directly</label>                
            </div>*@
            <div class="form-group form-check">
                @*<button class="btn btn-primary btn-lg" id="signin" type="button">Login</button>*@
                <button class="btn btn-primary btn-lg fw" onclick="SSO();" type="button">LOGIN</button>
                <button class="btn btn-secondary btn-lg" onclick="GoToSigncUp()" type="button">SIGN UP</button>
            </div>

            <div id="formFooter" style="margin-top:20px">
                @*<label class="col-md-12">Copyright @@2021 Mentor Media Pte Ltd</label>*@
            </div>
        </form>
    </div>
</div>
<script type="text/javascript">
        function GoToSigncUp() {
            location.href = '@Url.Action("SignUp","Home")';
        }
        function SSO() {
            //location.href = '/UAT/Freight_Wireframe/Calculator/Index?email=staff1@gmail.com';
            let urlMM = 'https://ebiz3-uat.mentormedia.com/UAT/O365Login?Redirect=';
            let urlLocal = window.location.href;
            location.href = urlMM + urlLocal;
        }
        function login2FA(ID) {
            var login = {
                channel: "web",
                username: ID,
                pwd: ''
            }
            console.log("---> data", login);
            var CTLSX = JSON.stringify(login)
            $.ajax({
                url: "/account/Login_2FA",
                type: "POST",
                dataType: "json",
                contentType: "application/json;charset=utf-8",
                data: CTLSX,
                success: function (data) {
                    if (data.error.code == 0)
                        window.location.href = "/Calculator/Index";
                    else {
                        alert(data.data);
                    }
                },
                error: function (xhr, status, error) {
                    alert("Error");
                }
            });
        }
        $(document).ready(function () {
            $("#submitButton").click(function () {
                var login = {
                    channel: "web",
                    username: $("#exampleInputEmail1").val(),
                    pwd: $("#exampleInputPassword1").val()
                }
                console.log("---> data", login);
                var CTLSX = JSON.stringify(login)
                $.ajax({
                    url: "/account/login",
                    type: "POST",
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    data: CTLSX,
                    success: function (data) {
                        window.location.href = "/Calculator/Index";
                    },
                    error: function (xhr, status, error) {
                        alert("Error");
                    }
                });

            });      
            var url = new URL(window.location.href);
            var idReturn = url.searchParams.get("ID");
            if (idReturn != null)
                
                login2FA(idReturn);
        })
</script>
<style>
    h3 {
        background: #008aab;
        color: #fff;
        padding: 10px;
        max-width: 100%;
        display: block;
    }
    .btn.btn-primary {
        background: #008aab;
    }
</style>