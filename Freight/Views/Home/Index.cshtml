@{
    ViewBag.Title = "Login";
}

<v-container>Hello world</v-container>
<v-data-table :headers="headers"
              :items="desserts"
              :items-per-page="5"
              class="elevation-1"></v-data-table>
@section scripts {
    <script>
        $(document).ready(function () {
            $("#submitButton").click(function () {
                var login = {
                    channel: "web",
                    username: $("#exampleInputEmail1").val(),
                    pwd: $("#exampleInputPassword1").val()
                }
                console.log("---> data", login);
                var CTLSX = JSON.stringify(login)
                $.ajax({
                    url: "/account/login",
                    type: "POST",
                    dataType: "json",
                    contentType: "application/json;charset=utf-8",
                    data: CTLSX,
                    success: function (data) {
                        window.location.href = "/Calculator/Index";
                    },
                    error: function (xhr, status, error) {
                        alert("Error");
                    }
                });

            })

        })
    </script>
    <script>

        $(document).ready(function () {

            var vueApp = new Vue({
                el: '#app',
                vuetify: new Vuetify(),
                icons: {
                    iconfont: 'mdi', // default - only for display purposes
                },
                mounted() {
                    //  this.getPendingRoute();
                    //  this.getRouteCategory();
                },
                data() {
                    return {
                        lat: [],
                        lng: [],
                        headers: [
                            {
                                text: 'Dessert (100g serving)',
                                align: 'start',
                                sortable: false,
                                value: 'name',
                            },
                            { text: 'Calories', value: 'calories' },
                            { text: 'Fat (g)', value: 'fat' },
                            { text: 'Carbs (g)', value: 'carbs' },
                            { text: 'Protein (g)', value: 'protein' },
                            { text: 'Iron (%)', value: 'iron' },
                        ],
                        desserts: [
                            {
                                name: 'Frozen Yogurt',
                                calories: 159,
                                fat: 6.0,
                                carbs: 24,
                                protein: 4.0,
                                iron: '1%',
                            },
                            {
                                name: 'Ice cream sandwich',
                                calories: 237,
                                fat: 9.0,
                                carbs: 37,
                                protein: 4.3,
                                iron: '1%',
                            },
                            {
                                name: 'Eclair',
                                calories: 262,
                                fat: 16.0,
                                carbs: 23,
                                protein: 6.0,
                                iron: '7%',
                            },
                            {
                                name: 'Cupcake',
                                calories: 305,
                                fat: 3.7,
                                carbs: 67,
                                protein: 4.3,
                                iron: '8%',
                            },
                            {
                                name: 'Gingerbread',
                                calories: 356,
                                fat: 16.0,
                                carbs: 49,
                                protein: 3.9,
                                iron: '16%',
                            },
                            {
                                name: 'Jelly bean',
                                calories: 375,
                                fat: 0.0,
                                carbs: 94,
                                protein: 0.0,
                                iron: '0%',
                            },
                            {
                                name: 'Lollipop',
                                calories: 392,
                                fat: 0.2,
                                carbs: 98,
                                protein: 0,
                                iron: '2%',
                            },
                            {
                                name: 'Honeycomb',
                                calories: 408,
                                fat: 3.2,
                                carbs: 87,
                                protein: 6.5,
                                iron: '45%',
                            },
                            {
                                name: 'Donut',
                                calories: 452,
                                fat: 25.0,
                                carbs: 51,
                                protein: 4.9,
                                iron: '22%',
                            },
                            {
                                name: 'KitKat',
                                calories: 518,
                                fat: 26.0,
                                carbs: 65,
                                protein: 7,
                                iron: '6%',
                            },
                        ],
                        selected_stop: '',
                        route_data_headers: [{
                            text: 'STOP NAME',
                            value: 'name',
                        },
                        {
                            text: 'NEARBY STOPS',
                            value: 'near_by_stop'
                        },
                        {
                            text: 'ADDRESS',
                            value: 'address'
                        },
                        {
                            text: 'ACTIONS',
                            value: 'action',
                            width: 100
                        },
                        ],

                        data: [],
                        row_data: [
                            {
                                route_detail: {
                                    driver: '',
                                }
                            }
                        ],
                        id: '',
                        paginate: false,
                        tab: null,
                        alert: {
                            type: '',
                            message: '',
                            isShowAlert: false
                        },
                        isDisable: true,
                        route_category: [],
                        deleteResolve: null,
                        delDialog: false,
                        freeTravelConfigsData: [],
                        isShowOrganisation: false,
                    }
                },
                created() {
                    //this.id = configsData;
                },
                computed: {

                },
                methods: {
                    changeStopName: function (item, nbs_name) {
                        item.name = nbs_name;
                    },
                    showDelConfirm: function (params) {
                        this.delDialog = true;
                        this.selected_stop = params;

                    },
                    getParameterByName: function (name) {
                        name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
                        var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
                            results = regex.exec(location.search);
                        return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
                    },
                    saveRouteStop: function (is_redirect) {
                        try {
                            const _this = this;
                            if (_this.route_data.route_detail.name_route === '') {
                                this.alert = {
                                    type: 'error',
                                    message: 'Please enter route name',
                                    isShowAlert: true
                                }
                                return;
                            }
                            if (_this.route_data.route_detail.route_category_id === '0') {
                                this.alert = {
                                    type: 'error',
                                    message: 'Please choose route category',
                                    isShowAlert: true
                                }
                                return;
                            }
                            let apiUrl = "index.php/routes/save_pending_route";
                            $.ajax({
                                type: "POST",
                                url: base_url + apiUrl,
                                data: JSON.stringify({
                                    route_id: _this.id,
                                    route_name: _this.route_data.route_detail.name_route,
                                    route_category_id: _this.route_data.route_detail.route_category_id,
                                    stops: _this.route_data.stops
                                }),
                                contentType: 'application/json',
                                success: function (response) {
                                    if (is_redirect == 0) {
                                        _this.alert = {
                                            type: 'success',
                                            message: _this.route_data.route_detail.name_route + ' saved successfully',
                                            isShowAlert: true
                                        };
                                    } else {
                                        window.location.href = "<?php echo base_url() ?>routes/edit_route/id/" + _this.id;
                                    }
                                }
                            });
                        } catch (e) {
                            this.alert = {
                                type: 'error',
                                message: e.message,
                                isShowAlert: true
                            }
                        }
                    },

                    closeAlert: function () {
                        this.alert.isShowAlert = false
                    },
                }

            })
        })
    </script>
}